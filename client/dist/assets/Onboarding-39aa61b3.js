import{_ as ke}from"./_plugin-vue_export-helper-0b6f8918.js";/* empty css                     *//* empty css                   *//* empty css                             *//* empty css                 *//* empty css                     *//* empty css                    *//* empty css                      *//* empty css                  */import{G as m,K as O,H as we,o as b,a as S,d as a,w as t,T as p,a6 as Ce,P as Oe,b as g,R as h,f as s,g as ee,L as ae,M as U,I as le,a1 as F,a2 as D,U as Ue,V as xe,a4 as ze,a3 as Ee,J as Se,N as Te,h as Fe,W as De,X as Pe,O as Ae,a0 as Re,a7 as $e,a8 as qe,Q as Be,x as te}from"./index-4e5dc47e.js";import{b as Le,e as Ie,f as je,h as Ke}from"./hr-9ba5c14e.js";import{g as Ne}from"./user-ad827ea9.js";import{a as Me}from"./position-98fae9c7.js";import{a as Ge}from"./organization-22ca4e80.js";import"./request-3883ec4c.js";const He={class:"onboarding-management"},Je={class:"tab-content"},Qe={class:"search-form"},We={class:"button-group"},Xe={class:"table-container"},Ye={class:"operation-buttons"},Ze={class:"pagination"},he={class:"tab-content"},ea={class:"search-form"},aa={class:"button-group"},la={class:"table-container"},ta={class:"operation-buttons"},oa={class:"pagination"},na={__name:"Onboarding",setup(sa){const $=m("onboarding"),P=m(!1),q=m([]),x=m(!1),A=m(!1),B=m([]),z=m(!1),R=m([]),L=m([]),I=m([]),V=O({keyword:"",status:""}),k=O({keyword:"",status:""}),v=O({page:1,limit:10,total:0}),c=O({page:1,limit:10,total:0}),r=O({user_id:"",position_id:"",org_id:"",start_date:"",salary:"",contract_type:"",notes:""}),f=O({user_id:"",leave_date:"",reason:"",handover_notes:""}),oe={user_id:[{required:!0,message:"请选择员工",trigger:"change"}],position_id:[{required:!0,message:"请选择岗位",trigger:"change"}],org_id:[{required:!0,message:"请选择组织",trigger:"change"}],start_date:[{required:!0,message:"请选择入职日期",trigger:"change"}]},ne={user_id:[{required:!0,message:"请选择员工",trigger:"change"}],leave_date:[{required:!0,message:"请选择离职日期",trigger:"change"}],reason:[{required:!0,message:"请选择离职原因",trigger:"change"}]},j=m(),K=m(),se=o=>({1:"info",2:"success",3:"danger"})[o]||"info",re=o=>({1:"待审核",2:"已通过",3:"已拒绝"})[o]||"待审核",de=o=>({1:"info",2:"success",3:"danger"})[o]||"info",ie=o=>({1:"待审核",2:"已通过",3:"已拒绝"})[o]||"待审核",ue=o=>{o==="onboarding"?y():o==="offboarding"&&w()},y=async()=>{P.value=!0;try{const o={page:v.page,limit:v.limit,...V},e=await Le(o);q.value=e.data,v.total=e.total}catch{p.error("加载数据失败")}finally{P.value=!1}},w=async()=>{A.value=!0;try{const o={page:c.page,limit:c.limit,...k},e=await Ie(o);B.value=e.data,c.total=e.total}catch{p.error("加载数据失败")}finally{A.value=!1}},pe=()=>{V.keyword="",V.status="",v.page=1,y()},me=()=>{k.keyword="",k.status="",c.page=1,w()},ge=async()=>{try{await j.value.validate(),await je(r),p.success("保存成功"),x.value=!1,be(),y()}catch{p.error("保存失败")}},fe=async()=>{try{await K.value.validate(),await Ke(f),p.success("保存成功"),z.value=!1,_e(),w()}catch{p.error("保存失败")}},be=()=>{Object.assign(r,{user_id:"",position_id:"",org_id:"",start_date:"",salary:"",contract_type:"",notes:""})},_e=()=>{Object.assign(f,{user_id:"",leave_date:"",reason:"",handover_notes:""})},ve=o=>{p.info("查看入职详情功能待实现")},N=async(o,e)=>{try{p.success("状态更新成功"),y()}catch{p.error("状态更新失败")}},ce=o=>{p.info("查看离职详情功能待实现")},M=async(o,e)=>{try{p.success("状态更新成功"),w()}catch{p.error("状态更新失败")}},ye=async()=>{try{const[o,e,_]=await Promise.all([Ne(),Me(),Ge()]);R.value=o.data||o,L.value=e.data||e,I.value=_.data||_}catch{p.error("加载基础数据失败")}};return we(()=>{y(),ye()}),(o,e)=>{const _=Ue,d=xe,n=ze,C=Ee,u=Se,T=Te,G=Fe,i=De,H=Pe,J=Ae,Q=Re,W=$e,Ve=Ce,X=qe,Y=Oe,Z=Be;return b(),S("div",He,[a(Ve,{modelValue:$.value,"onUpdate:modelValue":e[10]||(e[10]=l=>$.value=l),onTabChange:ue},{default:t(()=>[a(W,{label:"入职管理",name:"onboarding"},{default:t(()=>[g("div",Je,[g("div",Qe,[a(T,{model:V,inline:""},{default:t(()=>[a(d,{label:"关键词"},{default:t(()=>[a(_,{modelValue:V.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>V.keyword=l),placeholder:"搜索姓名或邮箱",clearable:"",onKeyup:h(y,["enter"])},null,8,["modelValue"])]),_:1}),a(d,{label:"状态"},{default:t(()=>[a(C,{modelValue:V.status,"onUpdate:modelValue":e[1]||(e[1]=l=>V.status=l),placeholder:"选择状态",clearable:""},{default:t(()=>[a(n,{label:"待审核",value:"1"}),a(n,{label:"已通过",value:"2"}),a(n,{label:"已拒绝",value:"3"})]),_:1},8,["modelValue"])]),_:1}),a(d,null,{default:t(()=>[a(u,{type:"primary",onClick:y},{default:t(()=>[...e[26]||(e[26]=[s("搜索",-1)])]),_:1}),a(u,{onClick:pe},{default:t(()=>[...e[27]||(e[27]=[s("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),g("div",We,[a(u,{type:"primary",onClick:e[2]||(e[2]=l=>x.value=!0)},{default:t(()=>[a(G,null,{default:t(()=>[a(ee(te))]),_:1}),e[28]||(e[28]=s(" 新建入职申请 ",-1))]),_:1})]),g("div",Xe,[ae((b(),U(J,{data:q.value,stripe:"",border:""},{default:t(()=>[a(i,{prop:"user_name",label:"姓名"}),a(i,{prop:"position_name",label:"岗位"}),a(i,{prop:"org_name",label:"所属组织"}),a(i,{prop:"start_date",label:"入职日期"}),a(i,{prop:"salary",label:"薪资"}),a(i,{prop:"contract_type",label:"合同类型"}),a(i,{prop:"status",label:"状态"},{default:t(({row:l})=>[a(H,{type:se(l.status)},{default:t(()=>[s(le(re(l.status)),1)]),_:2},1032,["type"])]),_:1}),a(i,{prop:"created_at",label:"申请时间"}),a(i,{label:"操作",width:"250"},{default:t(({row:l})=>[g("div",Ye,[a(u,{size:"small",onClick:E=>ve(l)},{default:t(()=>[...e[29]||(e[29]=[s("查看详情",-1)])]),_:1},8,["onClick"]),a(u,{size:"small",type:"success",onClick:E=>N(l,2)},{default:t(()=>[...e[30]||(e[30]=[s("通过",-1)])]),_:1},8,["onClick"]),a(u,{size:"small",type:"danger",onClick:E=>N(l,3)},{default:t(()=>[...e[31]||(e[31]=[s("拒绝",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[Z,P.value]])]),g("div",Ze,[a(Q,{"current-page":v.page,"onUpdate:currentPage":e[3]||(e[3]=l=>v.page=l),"page-size":v.limit,"onUpdate:pageSize":e[4]||(e[4]=l=>v.limit=l),total:v.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:y,onCurrentChange:y},null,8,["current-page","page-size","total"])])])]),_:1}),a(W,{label:"离职管理",name:"offboarding"},{default:t(()=>[g("div",he,[g("div",ea,[a(T,{model:k,inline:""},{default:t(()=>[a(d,{label:"关键词"},{default:t(()=>[a(_,{modelValue:k.keyword,"onUpdate:modelValue":e[5]||(e[5]=l=>k.keyword=l),placeholder:"搜索姓名或邮箱",clearable:"",onKeyup:h(w,["enter"])},null,8,["modelValue"])]),_:1}),a(d,{label:"状态"},{default:t(()=>[a(C,{modelValue:k.status,"onUpdate:modelValue":e[6]||(e[6]=l=>k.status=l),placeholder:"选择状态",clearable:""},{default:t(()=>[a(n,{label:"待审核",value:"1"}),a(n,{label:"已通过",value:"2"}),a(n,{label:"已拒绝",value:"3"})]),_:1},8,["modelValue"])]),_:1}),a(d,null,{default:t(()=>[a(u,{type:"primary",onClick:w},{default:t(()=>[...e[32]||(e[32]=[s("搜索",-1)])]),_:1}),a(u,{onClick:me},{default:t(()=>[...e[33]||(e[33]=[s("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),g("div",aa,[a(u,{type:"primary",onClick:e[7]||(e[7]=l=>z.value=!0)},{default:t(()=>[a(G,null,{default:t(()=>[a(ee(te))]),_:1}),e[34]||(e[34]=s(" 新建离职申请 ",-1))]),_:1})]),g("div",la,[ae((b(),U(J,{data:B.value,stripe:"",border:""},{default:t(()=>[a(i,{prop:"user_name",label:"姓名"}),a(i,{prop:"position_name",label:"岗位"}),a(i,{prop:"org_name",label:"所属组织"}),a(i,{prop:"leave_date",label:"离职日期"}),a(i,{prop:"reason",label:"离职原因"}),a(i,{prop:"status",label:"状态"},{default:t(({row:l})=>[a(H,{type:de(l.status)},{default:t(()=>[s(le(ie(l.status)),1)]),_:2},1032,["type"])]),_:1}),a(i,{prop:"created_at",label:"申请时间"}),a(i,{label:"操作",width:"250"},{default:t(({row:l})=>[g("div",ta,[a(u,{size:"small",onClick:E=>ce(l)},{default:t(()=>[...e[35]||(e[35]=[s("查看详情",-1)])]),_:1},8,["onClick"]),a(u,{size:"small",type:"success",onClick:E=>M(l,2)},{default:t(()=>[...e[36]||(e[36]=[s("通过",-1)])]),_:1},8,["onClick"]),a(u,{size:"small",type:"danger",onClick:E=>M(l,3)},{default:t(()=>[...e[37]||(e[37]=[s("拒绝",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[Z,A.value]])]),g("div",oa,[a(Q,{"current-page":c.page,"onUpdate:currentPage":e[8]||(e[8]=l=>c.page=l),"page-size":c.limit,"onUpdate:pageSize":e[9]||(e[9]=l=>c.limit=l),total:c.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:w,onCurrentChange:w},null,8,["current-page","page-size","total"])])])]),_:1})]),_:1},8,["modelValue"]),a(Y,{modelValue:x.value,"onUpdate:modelValue":e[19]||(e[19]=l=>x.value=l),title:"新建入职申请",width:"600px"},{footer:t(()=>[a(u,{onClick:e[18]||(e[18]=l=>x.value=!1)},{default:t(()=>[...e[38]||(e[38]=[s("取消",-1)])]),_:1}),a(u,{type:"primary",onClick:ge},{default:t(()=>[...e[39]||(e[39]=[s("保存",-1)])]),_:1})]),default:t(()=>[a(T,{model:r,rules:oe,ref_key:"onboardingFormRef",ref:j,"label-width":"100px"},{default:t(()=>[a(d,{label:"员工",prop:"user_id"},{default:t(()=>[a(C,{modelValue:r.user_id,"onUpdate:modelValue":e[11]||(e[11]=l=>r.user_id=l),placeholder:"选择员工",style:{width:"100%"}},{default:t(()=>[(b(!0),S(F,null,D(R.value,l=>(b(),U(n,{key:l.id,label:l.real_name||l.username,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"岗位",prop:"position_id"},{default:t(()=>[a(C,{modelValue:r.position_id,"onUpdate:modelValue":e[12]||(e[12]=l=>r.position_id=l),placeholder:"选择岗位",style:{width:"100%"}},{default:t(()=>[(b(!0),S(F,null,D(L.value,l=>(b(),U(n,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"所属组织",prop:"org_id"},{default:t(()=>[a(C,{modelValue:r.org_id,"onUpdate:modelValue":e[13]||(e[13]=l=>r.org_id=l),placeholder:"选择组织",style:{width:"100%"}},{default:t(()=>[(b(!0),S(F,null,D(I.value,l=>(b(),U(n,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"入职日期",prop:"start_date"},{default:t(()=>[a(X,{modelValue:r.start_date,"onUpdate:modelValue":e[14]||(e[14]=l=>r.start_date=l),type:"date",placeholder:"选择入职日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(d,{label:"薪资"},{default:t(()=>[a(_,{modelValue:r.salary,"onUpdate:modelValue":e[15]||(e[15]=l=>r.salary=l),placeholder:"请输入薪资"},null,8,["modelValue"])]),_:1}),a(d,{label:"合同类型"},{default:t(()=>[a(C,{modelValue:r.contract_type,"onUpdate:modelValue":e[16]||(e[16]=l=>r.contract_type=l),placeholder:"选择合同类型"},{default:t(()=>[a(n,{label:"正式合同",value:"formal"}),a(n,{label:"试用期合同",value:"probation"}),a(n,{label:"临时合同",value:"temporary"})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"备注"},{default:t(()=>[a(_,{modelValue:r.notes,"onUpdate:modelValue":e[17]||(e[17]=l=>r.notes=l),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(Y,{modelValue:z.value,"onUpdate:modelValue":e[25]||(e[25]=l=>z.value=l),title:"新建离职申请",width:"600px"},{footer:t(()=>[a(u,{onClick:e[24]||(e[24]=l=>z.value=!1)},{default:t(()=>[...e[40]||(e[40]=[s("取消",-1)])]),_:1}),a(u,{type:"primary",onClick:fe},{default:t(()=>[...e[41]||(e[41]=[s("保存",-1)])]),_:1})]),default:t(()=>[a(T,{model:f,rules:ne,ref_key:"offboardingFormRef",ref:K,"label-width":"100px"},{default:t(()=>[a(d,{label:"员工",prop:"user_id"},{default:t(()=>[a(C,{modelValue:f.user_id,"onUpdate:modelValue":e[20]||(e[20]=l=>f.user_id=l),placeholder:"选择员工",style:{width:"100%"}},{default:t(()=>[(b(!0),S(F,null,D(R.value,l=>(b(),U(n,{key:l.id,label:l.real_name||l.username,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"离职日期",prop:"leave_date"},{default:t(()=>[a(X,{modelValue:f.leave_date,"onUpdate:modelValue":e[21]||(e[21]=l=>f.leave_date=l),type:"date",placeholder:"选择离职日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(d,{label:"离职原因",prop:"reason"},{default:t(()=>[a(C,{modelValue:f.reason,"onUpdate:modelValue":e[22]||(e[22]=l=>f.reason=l),placeholder:"选择离职原因",style:{width:"100%"}},{default:t(()=>[a(n,{label:"个人原因",value:"personal"}),a(n,{label:"薪资问题",value:"salary"}),a(n,{label:"发展机会",value:"career"}),a(n,{label:"工作环境",value:"environment"}),a(n,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"交接说明"},{default:t(()=>[a(_,{modelValue:f.handover_notes,"onUpdate:modelValue":e[23]||(e[23]=l=>f.handover_notes=l),type:"textarea",rows:4,placeholder:"请输入工作交接说明"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},wa=ke(na,[["__scopeId","data-v-8a121223"]]);export{wa as default};
