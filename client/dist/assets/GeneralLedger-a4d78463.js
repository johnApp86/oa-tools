import{_ as le}from"./_plugin-vue_export-helper-0b6f8918.js";/* empty css                     *//* empty css                   *//* empty css                       *//* empty css                  *//* empty css                     *//* empty css                *//* empty css                       *//* empty css                 */import{G as m,K as R,c as ae,H as te,o as S,a as oe,b,d as e,w as a,L as ne,M as de,T as f,J as re,N as se,O as ie,P as ue,Q as pe,R as ce,f as d,g as T,I as y,aj as me,S as be,U as fe,V as _e,a4 as ye,a3 as ve,h as ge,W as we,X as Ve,Y as ke,_ as he,$ as Ce,x as xe,ak as Te,al as Ee}from"./index-25be2468.js";const Ie={class:"general-ledger-management"},De={class:"search-form"},Ue={class:"button-group"},Be={class:"table-container"},Le={class:"operation-buttons"},Me={class:"dialog-footer"},qe={__name:"GeneralLedger",setup(Re){const k=m(!1),E=m([]),I=m([]),p=m(!1),h=m(!1),v=m(),c=R({keyword:"",accountType:""}),n=R({id:null,code:"",name:"",type:"",parentId:0,balanceDirection:"debit",status:1,remark:""}),F={code:[{required:!0,message:"请输入科目代码",trigger:"blur"}],name:[{required:!0,message:"请输入科目名称",trigger:"blur"}],type:[{required:!0,message:"请选择科目类型",trigger:"change"}]},N=ae(()=>n.id?"编辑科目":n.parentId&&n.parentId!==0?"添加子科目":"新增科目"),_=async()=>{k.value=!0;try{const t=[{id:1,code:"1001",name:"库存现金",type:"asset",parentId:0,balance:1e4,debit_balance:1e4,credit_balance:0,status:1,created_at:"2025-10-30 17:00:00",children:[]},{id:2,code:"1002",name:"银行存款",type:"asset",parentId:0,balance:5e5,debit_balance:5e5,credit_balance:0,status:1,created_at:"2025-10-30 17:00:00",children:[]},{id:3,code:"2001",name:"短期借款",type:"liability",parentId:0,balance:2e5,debit_balance:0,credit_balance:2e5,status:1,created_at:"2025-10-30 17:00:00",children:[]}];E.value=t}catch(t){console.error("加载数据失败:",t),f.error("加载数据失败")}finally{k.value=!1}},g=async()=>{try{I.value=[{id:1,name:"资产",children:[{id:11,name:"流动资产"},{id:12,name:"非流动资产"}]},{id:2,name:"负债",children:[{id:21,name:"流动负债"},{id:22,name:"非流动负债"}]}]}catch(t){console.error("加载科目树失败:",t)}},D=()=>{_()},$=()=>{c.keyword="",c.accountType="",_()},z=()=>{Object.assign(n,{id:null,code:"",name:"",type:"",parentId:0,balanceDirection:"debit",status:1,remark:""}),p.value=!0,g()},G=t=>{Object.assign(n,{id:t.id,code:t.code,name:t.name,type:t.type,parentId:t.parentId,balanceDirection:t.balanceDirection||"debit",status:t.status,remark:t.remark||""}),p.value=!0,g()},O=t=>{Object.assign(n,{id:null,code:"",name:"",type:"",parentId:t.id,balanceDirection:"debit",status:1,remark:""}),p.value=!0,g()},j=async t=>{try{await be.confirm(`确定要删除科目"${t.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),f.success("删除成功"),_()}catch{}},A=()=>{f.info("导入功能开发中...")},K=()=>{f.info("导出功能开发中...")},P=async()=>{if(v.value)try{await v.value.validate(),h.value=!0,await new Promise(t=>setTimeout(t,1e3)),f.success(n.id?"更新成功":"创建成功"),p.value=!1,_()}catch(t){console.error("提交失败:",t),f.error("操作失败")}finally{h.value=!1}},H=()=>{var t;(t=v.value)==null||t.resetFields()},J=t=>({asset:"success",liability:"warning",equity:"info",revenue:"primary",expense:"danger"})[t]||"info",Q=t=>({asset:"资产",liability:"负债",equity:"所有者权益",revenue:"收入",expense:"费用"})[t]||t,W=t=>t>=0?"positive-balance":"negative-balance",C=t=>t==null?"0.00":Number(t).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2});return te(()=>{_(),g()}),(t,l)=>{const w=fe,r=_e,s=ye,U=ve,i=re,B=se,x=ge,u=we,L=Ve,X=ie,Y=ke,V=he,M=Ce,Z=ue,ee=pe;return S(),oe("div",Ie,[b("div",De,[e(B,{model:c,inline:""},{default:a(()=>[e(r,{label:"关键词"},{default:a(()=>[e(w,{modelValue:c.keyword,"onUpdate:modelValue":l[0]||(l[0]=o=>c.keyword=o),placeholder:"请输入科目代码或名称",clearable:"",onKeyup:ce(D,["enter"])},null,8,["modelValue"])]),_:1}),e(r,{label:"科目类型"},{default:a(()=>[e(U,{modelValue:c.accountType,"onUpdate:modelValue":l[1]||(l[1]=o=>c.accountType=o),placeholder:"请选择科目类型",clearable:"",style:{width:"200px"},"popper-append-to-body":!1},{default:a(()=>[e(s,{label:"资产",value:"asset"}),e(s,{label:"负债",value:"liability"}),e(s,{label:"所有者权益",value:"equity"}),e(s,{label:"收入",value:"revenue"}),e(s,{label:"费用",value:"expense"})]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(i,{type:"primary",onClick:D},{default:a(()=>[...l[11]||(l[11]=[d("搜索",-1)])]),_:1}),e(i,{onClick:$},{default:a(()=>[...l[12]||(l[12]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),b("div",Ue,[e(i,{type:"primary",onClick:z},{default:a(()=>[e(x,null,{default:a(()=>[e(T(xe))]),_:1}),l[13]||(l[13]=d(" 新增科目 ",-1))]),_:1}),e(i,{type:"success",onClick:A},{default:a(()=>[e(x,null,{default:a(()=>[e(T(Te))]),_:1}),l[14]||(l[14]=d(" 导入科目 ",-1))]),_:1}),e(i,{type:"warning",onClick:K},{default:a(()=>[e(x,null,{default:a(()=>[e(T(Ee))]),_:1}),l[15]||(l[15]=d(" 导出科目 ",-1))]),_:1})]),b("div",Be,[ne((S(),de(X,{data:E.value,stripe:"",border:"","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"},style:{width:"100%"},"table-layout":"fixed"},{default:a(()=>[e(u,{prop:"code",label:"科目代码",width:"120","show-overflow-tooltip":""}),e(u,{prop:"name",label:"科目名称","min-width":"200","show-overflow-tooltip":""}),e(u,{prop:"type",label:"科目类型",width:"120","show-overflow-tooltip":""},{default:a(({row:o})=>[e(L,{type:J(o.type)},{default:a(()=>[d(y(Q(o.type)),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"balance",label:"余额",width:"140",align:"right","show-overflow-tooltip":""},{default:a(({row:o})=>[b("span",{class:me(W(o.balance))},y(C(o.balance)),3)]),_:1}),e(u,{prop:"debit_balance",label:"借方余额",width:"140",align:"right","show-overflow-tooltip":""},{default:a(({row:o})=>[d(y(C(o.debit_balance)),1)]),_:1}),e(u,{prop:"credit_balance",label:"贷方余额",width:"140",align:"right","show-overflow-tooltip":""},{default:a(({row:o})=>[d(y(C(o.credit_balance)),1)]),_:1}),e(u,{prop:"status",label:"状态",width:"100","show-overflow-tooltip":""},{default:a(({row:o})=>[e(L,{type:o.status===1?"success":"danger"},{default:a(()=>[d(y(o.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"created_at",label:"创建时间",width:"180","show-overflow-tooltip":""}),e(u,{label:"操作",width:"280",fixed:"right"},{default:a(({row:o})=>[b("div",Le,[e(i,{size:"small",onClick:q=>G(o)},{default:a(()=>[...l[16]||(l[16]=[d("编辑",-1)])]),_:1},8,["onClick"]),e(i,{size:"small",type:"primary",onClick:q=>O(o)},{default:a(()=>[...l[17]||(l[17]=[d(" 添加子科目 ",-1)])]),_:1},8,["onClick"]),e(i,{size:"small",type:"danger",onClick:q=>j(o)},{default:a(()=>[...l[18]||(l[18]=[d(" 删除 ",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[ee,k.value]])]),e(Z,{modelValue:p.value,"onUpdate:modelValue":l[10]||(l[10]=o=>p.value=o),title:N.value,width:"600px",onClose:H},{footer:a(()=>[b("div",Me,[e(i,{onClick:l[9]||(l[9]=o=>p.value=!1)},{default:a(()=>[...l[23]||(l[23]=[d("取消",-1)])]),_:1}),e(i,{type:"primary",loading:h.value,onClick:P},{default:a(()=>[...l[24]||(l[24]=[d(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[e(B,{ref_key:"formRef",ref:v,model:n,rules:F,"label-width":"100px"},{default:a(()=>[e(r,{label:"科目代码",prop:"code"},{default:a(()=>[e(w,{modelValue:n.code,"onUpdate:modelValue":l[2]||(l[2]=o=>n.code=o),placeholder:"请输入科目代码"},null,8,["modelValue"])]),_:1}),e(r,{label:"科目名称",prop:"name"},{default:a(()=>[e(w,{modelValue:n.name,"onUpdate:modelValue":l[3]||(l[3]=o=>n.name=o),placeholder:"请输入科目名称"},null,8,["modelValue"])]),_:1}),e(r,{label:"科目类型",prop:"type"},{default:a(()=>[e(U,{modelValue:n.type,"onUpdate:modelValue":l[4]||(l[4]=o=>n.type=o),placeholder:"请选择科目类型"},{default:a(()=>[e(s,{label:"资产",value:"asset"}),e(s,{label:"负债",value:"liability"}),e(s,{label:"所有者权益",value:"equity"}),e(s,{label:"收入",value:"revenue"}),e(s,{label:"费用",value:"expense"})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"父级科目",prop:"parentId"},{default:a(()=>[e(Y,{modelValue:n.parentId,"onUpdate:modelValue":l[5]||(l[5]=o=>n.parentId=o),data:I.value,props:{value:"id",label:"name",children:"children"},placeholder:"请选择父级科目",clearable:"","check-strictly":""},null,8,["modelValue","data"])]),_:1}),e(r,{label:"余额方向",prop:"balanceDirection"},{default:a(()=>[e(M,{modelValue:n.balanceDirection,"onUpdate:modelValue":l[6]||(l[6]=o=>n.balanceDirection=o)},{default:a(()=>[e(V,{label:"debit"},{default:a(()=>[...l[19]||(l[19]=[d("借方",-1)])]),_:1}),e(V,{label:"credit"},{default:a(()=>[...l[20]||(l[20]=[d("贷方",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"状态",prop:"status"},{default:a(()=>[e(M,{modelValue:n.status,"onUpdate:modelValue":l[7]||(l[7]=o=>n.status=o)},{default:a(()=>[e(V,{label:1},{default:a(()=>[...l[21]||(l[21]=[d("启用",-1)])]),_:1}),e(V,{label:0},{default:a(()=>[...l[22]||(l[22]=[d("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"备注",prop:"remark"},{default:a(()=>[e(w,{modelValue:n.remark,"onUpdate:modelValue":l[8]||(l[8]=o=>n.remark=o),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Pe=le(qe,[["__scopeId","data-v-06958cee"]]);export{Pe as default};
