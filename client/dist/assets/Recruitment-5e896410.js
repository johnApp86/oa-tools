import{_ as se}from"./_plugin-vue_export-helper-0b6f8918.js";/* empty css                     *//* empty css                   *//* empty css                      *//* empty css                  *//* empty css                     *//* empty css                 */import{G as d,K as z,H as ne,o as f,a as P,b as V,d as t,w as a,L as N,M as C,T as p,J as re,N as ie,O as ue,a0 as de,P as pe,Q as me,R as _e,f as r,g as ge,I as S,a1 as j,a2 as A,S as ce,U as fe,V as ve,a4 as ye,a3 as be,h as Ve,W as ke,X as Ce,x as we}from"./index-4e5dc47e.js";import{g as xe,c as Re,d as Ue,a as Ee}from"./hr-9ba5c14e.js";import{a as ze}from"./position-98fae9c7.js";import{a as Pe}from"./organization-22ca4e80.js";import"./request-3883ec4c.js";const Se={class:"recruitment-management"},Te={class:"search-form"},Fe={class:"button-group"},$e={class:"table-container"},qe={class:"operation-buttons"},Be={class:"pagination"},De={__name:"Recruitment",setup(Le){const w=d(!1),T=d([]),F=d([]),x=d(!1),v=d(!1),R=d(!1),U=d(null),$=d([]),q=d([]),_=z({keyword:"",status:""}),m=z({page:1,limit:10,total:0}),s=z({title:"",position_id:"",org_id:"",salary_range:"",urgent_level:1,description:"",requirements:""}),G={title:[{required:!0,message:"请输入职位标题",trigger:"blur"}],position_id:[{required:!0,message:"请选择岗位",trigger:"change"}],org_id:[{required:!0,message:"请选择组织",trigger:"change"}]},B=d(),H=o=>({1:"",2:"warning",3:"danger"})[o]||"",J=o=>({1:"普通",2:"紧急",3:"非常紧急"})[o]||"普通",Q=o=>({1:"info",2:"success",3:"danger"})[o]||"info",W=o=>({1:"待审核",2:"已通过",3:"已拒绝"})[o]||"待审核",g=async()=>{w.value=!0;try{const o={page:m.page,limit:m.limit,..._},e=await xe(o);T.value=e.data,m.total=e.total}catch{p.error("加载数据失败")}finally{w.value=!1}},X=()=>{_.keyword="",_.status="",m.page=1,g()},Y=async()=>{try{await B.value.validate(),await Re(s),p.success("保存成功"),v.value=!1,Z(),g()}catch{p.error("保存失败")}},Z=()=>{Object.assign(s,{title:"",position_id:"",org_id:"",salary_range:"",urgent_level:1,description:"",requirements:""}),U.value=null},h=o=>{U.value=o,Object.assign(s,o),v.value=!0},ee=async o=>{try{await ce.confirm("确定要删除这个职位吗？","提示",{type:"warning"}),await Ue(o.id),p.success("删除成功"),g()}catch(e){e!=="cancel"&&p.error(e.message||"删除失败")}},D=async o=>{R.value=!0,x.value=!0;try{const e=await Ee({position_id:o.id});F.value=e.data}catch{p.error("加载简历失败")}finally{x.value=!1}},te=o=>{p.info("查看简历详情功能待实现")},L=async(o,e)=>{try{p.success("状态更新成功"),D({id:o.position_id})}catch{p.error("状态更新失败")}},le=async()=>{try{const[o,e]=await Promise.all([ze(),Pe()]);$.value=o.data||o,q.value=e.data||e}catch{p.error("加载基础数据失败")}};return ne(()=>{g(),le()}),(o,e)=>{const y=fe,u=ve,c=ye,k=be,i=re,O=ie,ae=Ve,n=ke,E=Ce,I=ue,oe=de,K=pe,M=me;return f(),P("div",Se,[V("div",Te,[t(O,{model:_,inline:""},{default:a(()=>[t(u,{label:"关键词"},{default:a(()=>[t(y,{modelValue:_.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>_.keyword=l),placeholder:"搜索职位标题或岗位名称",clearable:"",onKeyup:_e(g,["enter"])},null,8,["modelValue"])]),_:1}),t(u,{label:"状态"},{default:a(()=>[t(k,{modelValue:_.status,"onUpdate:modelValue":e[1]||(e[1]=l=>_.status=l),placeholder:"选择状态",clearable:""},{default:a(()=>[t(c,{label:"招聘中",value:"1"}),t(c,{label:"已暂停",value:"0"}),t(c,{label:"已结束",value:"2"})]),_:1},8,["modelValue"])]),_:1}),t(u,null,{default:a(()=>[t(i,{type:"primary",onClick:g},{default:a(()=>[...e[15]||(e[15]=[r("搜索",-1)])]),_:1}),t(i,{onClick:X},{default:a(()=>[...e[16]||(e[16]=[r("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),V("div",Fe,[t(i,{type:"primary",onClick:e[2]||(e[2]=l=>v.value=!0)},{default:a(()=>[t(ae,null,{default:a(()=>[t(ge(we))]),_:1}),e[17]||(e[17]=r(" 发布职位 ",-1))]),_:1})]),V("div",$e,[N((f(),C(I,{data:T.value,stripe:"",border:""},{default:a(()=>[t(n,{prop:"title",label:"职位标题"}),t(n,{prop:"position_name",label:"岗位名称"}),t(n,{prop:"org_name",label:"所属组织"}),t(n,{prop:"salary_range",label:"薪资范围"}),t(n,{prop:"urgent_level",label:"紧急程度"},{default:a(({row:l})=>[t(E,{type:H(l.urgent_level)},{default:a(()=>[r(S(J(l.urgent_level)),1)]),_:2},1032,["type"])]),_:1}),t(n,{prop:"status",label:"状态"},{default:a(({row:l})=>[t(E,{type:l.status===1?"success":"danger"},{default:a(()=>[r(S(l.status===1?"招聘中":l.status===0?"已暂停":"已结束"),1)]),_:2},1032,["type"])]),_:1}),t(n,{prop:"created_at",label:"发布时间"}),t(n,{label:"操作",width:"200",fixed:"right"},{default:a(({row:l})=>[V("div",qe,[t(i,{size:"small",onClick:b=>D(l)},{default:a(()=>[...e[18]||(e[18]=[r("查看简历",-1)])]),_:1},8,["onClick"]),t(i,{size:"small",type:"primary",onClick:b=>h(l)},{default:a(()=>[...e[19]||(e[19]=[r("编辑",-1)])]),_:1},8,["onClick"]),t(i,{size:"small",type:"danger",onClick:b=>ee(l)},{default:a(()=>[...e[20]||(e[20]=[r("删除",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[M,w.value]])]),V("div",Be,[t(oe,{"current-page":m.page,"onUpdate:currentPage":e[3]||(e[3]=l=>m.page=l),"page-size":m.limit,"onUpdate:pageSize":e[4]||(e[4]=l=>m.limit=l),total:m.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:g,onCurrentChange:g},null,8,["current-page","page-size","total"])]),t(K,{modelValue:v.value,"onUpdate:modelValue":e[13]||(e[13]=l=>v.value=l),title:U.value?"编辑职位":"发布职位",width:"600px"},{footer:a(()=>[t(i,{onClick:e[12]||(e[12]=l=>v.value=!1)},{default:a(()=>[...e[21]||(e[21]=[r("取消",-1)])]),_:1}),t(i,{type:"primary",onClick:Y},{default:a(()=>[...e[22]||(e[22]=[r("保存",-1)])]),_:1})]),default:a(()=>[t(O,{model:s,rules:G,ref_key:"positionFormRef",ref:B,"label-width":"100px"},{default:a(()=>[t(u,{label:"职位标题",prop:"title"},{default:a(()=>[t(y,{modelValue:s.title,"onUpdate:modelValue":e[5]||(e[5]=l=>s.title=l),placeholder:"请输入职位标题"},null,8,["modelValue"])]),_:1}),t(u,{label:"岗位",prop:"position_id"},{default:a(()=>[t(k,{modelValue:s.position_id,"onUpdate:modelValue":e[6]||(e[6]=l=>s.position_id=l),placeholder:"选择岗位",style:{width:"100%"}},{default:a(()=>[(f(!0),P(j,null,A($.value,l=>(f(),C(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"所属组织",prop:"org_id"},{default:a(()=>[t(k,{modelValue:s.org_id,"onUpdate:modelValue":e[7]||(e[7]=l=>s.org_id=l),placeholder:"选择组织",style:{width:"100%"}},{default:a(()=>[(f(!0),P(j,null,A(q.value,l=>(f(),C(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"薪资范围"},{default:a(()=>[t(y,{modelValue:s.salary_range,"onUpdate:modelValue":e[8]||(e[8]=l=>s.salary_range=l),placeholder:"如：8K-15K"},null,8,["modelValue"])]),_:1}),t(u,{label:"紧急程度"},{default:a(()=>[t(k,{modelValue:s.urgent_level,"onUpdate:modelValue":e[9]||(e[9]=l=>s.urgent_level=l),placeholder:"选择紧急程度"},{default:a(()=>[t(c,{label:"普通",value:1}),t(c,{label:"紧急",value:2}),t(c,{label:"非常紧急",value:3})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"职位描述"},{default:a(()=>[t(y,{modelValue:s.description,"onUpdate:modelValue":e[10]||(e[10]=l=>s.description=l),type:"textarea",rows:4,placeholder:"请输入职位描述"},null,8,["modelValue"])]),_:1}),t(u,{label:"任职要求"},{default:a(()=>[t(y,{modelValue:s.requirements,"onUpdate:modelValue":e[11]||(e[11]=l=>s.requirements=l),type:"textarea",rows:4,placeholder:"请输入任职要求"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(K,{modelValue:R.value,"onUpdate:modelValue":e[14]||(e[14]=l=>R.value=l),title:"简历列表",width:"80%"},{default:a(()=>[N((f(),C(I,{data:F.value},{default:a(()=>[t(n,{prop:"name",label:"姓名"}),t(n,{prop:"email",label:"邮箱"}),t(n,{prop:"phone",label:"手机号"}),t(n,{prop:"experience",label:"工作经验"}),t(n,{prop:"education",label:"学历"}),t(n,{prop:"status",label:"状态"},{default:a(({row:l})=>[t(E,{type:Q(l.status)},{default:a(()=>[r(S(W(l.status)),1)]),_:2},1032,["type"])]),_:1}),t(n,{prop:"created_at",label:"投递时间"}),t(n,{label:"操作",width:"200"},{default:a(({row:l})=>[t(i,{size:"small",onClick:b=>te(l)},{default:a(()=>[...e[23]||(e[23]=[r("查看详情",-1)])]),_:1},8,["onClick"]),t(i,{size:"small",type:"success",onClick:b=>L(l,2)},{default:a(()=>[...e[24]||(e[24]=[r("通过",-1)])]),_:1},8,["onClick"]),t(i,{size:"small",type:"danger",onClick:b=>L(l,3)},{default:a(()=>[...e[25]||(e[25]=[r("拒绝",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[M,x.value]])]),_:1},8,["modelValue"])])}}},Xe=se(De,[["__scopeId","data-v-c0048a10"]]);export{Xe as default};
