import{_ as le}from"./_plugin-vue_export-helper-0b6f8918.js";/* empty css                     *//* empty css                   *//* empty css                       *//* empty css                  *//* empty css                     *//* empty css                *//* empty css                       *//* empty css                 */import{G as m,K as R,c as ae,H as te,o as S,a as ne,b,d as e,w as a,L as oe,M as de,T as _,J as re,N as se,O as ie,P as ue,Q as pe,R as ce,f as d,g as I,I as y,aj as me,S as be,U as _e,V as fe,a4 as ye,a3 as ge,h as ve,W as Ve,X as ke,Y as Ce,_ as xe,$ as Te,x as Ee,ak as Ie,al as De}from"./index-4e5dc47e.js";const he={class:"general-ledger-management"},we={class:"search-form"},Ue={class:"button-group"},Be={class:"table-container"},Le={class:"operation-buttons"},Me={class:"dialog-footer"},qe={__name:"GeneralLedger",setup(Re){const C=m(!1),D=m([]),h=m([]),p=m(!1),x=m(!1),g=m(),c=R({keyword:"",accountType:""}),o=R({id:null,code:"",name:"",type:"",parentId:0,balanceDirection:"debit",status:1,remark:""}),F={code:[{required:!0,message:"请输入科目代码",trigger:"blur"}],name:[{required:!0,message:"请输入科目名称",trigger:"blur"}],type:[{required:!0,message:"请选择科目类型",trigger:"change"}]},N=ae(()=>o.id?"编辑科目":o.parentId&&o.parentId!==0?"添加子科目":"新增科目"),f=async()=>{C.value=!0;try{const t=[{id:1,code:"1001",name:"库存现金",type:"asset",parentId:0,balance:1e4,debit_balance:1e4,credit_balance:0,status:1,created_at:"2025-10-30 17:00:00",children:[]},{id:2,code:"1002",name:"银行存款",type:"asset",parentId:0,balance:5e5,debit_balance:5e5,credit_balance:0,status:1,created_at:"2025-10-30 17:00:00",children:[]},{id:3,code:"2001",name:"短期借款",type:"liability",parentId:0,balance:2e5,debit_balance:0,credit_balance:2e5,status:1,created_at:"2025-10-30 17:00:00",children:[]}];D.value=t}catch(t){console.error("加载数据失败:",t),_.error("加载数据失败")}finally{C.value=!1}},v=async()=>{try{h.value=[{id:1,name:"资产",children:[{id:11,name:"流动资产"},{id:12,name:"非流动资产"}]},{id:2,name:"负债",children:[{id:21,name:"流动负债"},{id:22,name:"非流动负债"}]}]}catch(t){console.error("加载科目树失败:",t)}},w=()=>{f()},$=()=>{c.keyword="",c.accountType="",f()},z=()=>{Object.assign(o,{id:null,code:"",name:"",type:"",parentId:0,balanceDirection:"debit",status:1,remark:""}),p.value=!0,v()},G=t=>{Object.assign(o,{id:t.id,code:t.code,name:t.name,type:t.type,parentId:t.parentId,balanceDirection:t.balanceDirection||"debit",status:t.status,remark:t.remark||""}),p.value=!0,v()},O=t=>{Object.assign(o,{id:null,code:"",name:"",type:"",parentId:t.id,balanceDirection:"debit",status:1,remark:""}),p.value=!0,v()},j=async t=>{try{await be.confirm(`确定要删除科目"${t.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),_.success("删除成功"),f()}catch{}},A=()=>{_.info("导入功能开发中...")},K=()=>{_.info("导出功能开发中...")},P=async()=>{if(g.value)try{await g.value.validate(),x.value=!0,await new Promise(t=>setTimeout(t,1e3)),_.success(o.id?"更新成功":"创建成功"),p.value=!1,f()}catch(t){console.error("提交失败:",t),_.error("操作失败")}finally{x.value=!1}},H=()=>{var t;(t=g.value)==null||t.resetFields()},J=t=>({asset:"success",liability:"warning",equity:"info",revenue:"primary",expense:"danger"})[t]||"info",Q=t=>({asset:"资产",liability:"负债",equity:"所有者权益",revenue:"收入",expense:"费用"})[t]||t,W=t=>t>=0?"positive-balance":"negative-balance",T=t=>t==null?"0.00":Number(t).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2});return te(()=>{f(),v()}),(t,l)=>{const V=_e,r=fe,s=ye,U=ge,i=re,B=se,E=ve,u=Ve,L=ke,X=ie,Y=Ce,k=xe,M=Te,Z=ue,ee=pe;return S(),ne("div",he,[b("div",we,[e(B,{model:c,inline:""},{default:a(()=>[e(r,{label:"关键词"},{default:a(()=>[e(V,{modelValue:c.keyword,"onUpdate:modelValue":l[0]||(l[0]=n=>c.keyword=n),placeholder:"请输入科目代码或名称",clearable:"",onKeyup:ce(w,["enter"])},null,8,["modelValue"])]),_:1}),e(r,{label:"科目类型"},{default:a(()=>[e(U,{modelValue:c.accountType,"onUpdate:modelValue":l[1]||(l[1]=n=>c.accountType=n),placeholder:"请选择科目类型",clearable:""},{default:a(()=>[e(s,{label:"资产",value:"asset"}),e(s,{label:"负债",value:"liability"}),e(s,{label:"所有者权益",value:"equity"}),e(s,{label:"收入",value:"revenue"}),e(s,{label:"费用",value:"expense"})]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(i,{type:"primary",onClick:w},{default:a(()=>[...l[11]||(l[11]=[d("搜索",-1)])]),_:1}),e(i,{onClick:$},{default:a(()=>[...l[12]||(l[12]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),b("div",Ue,[e(i,{type:"primary",onClick:z},{default:a(()=>[e(E,null,{default:a(()=>[e(I(Ee))]),_:1}),l[13]||(l[13]=d(" 新增科目 ",-1))]),_:1}),e(i,{type:"success",onClick:A},{default:a(()=>[e(E,null,{default:a(()=>[e(I(Ie))]),_:1}),l[14]||(l[14]=d(" 导入科目 ",-1))]),_:1}),e(i,{type:"warning",onClick:K},{default:a(()=>[e(E,null,{default:a(()=>[e(I(De))]),_:1}),l[15]||(l[15]=d(" 导出科目 ",-1))]),_:1})]),b("div",Be,[oe((S(),de(X,{data:D.value,stripe:"",border:"","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:a(()=>[e(u,{prop:"code",label:"科目代码",width:"120"}),e(u,{prop:"name",label:"科目名称",width:"200"}),e(u,{prop:"type",label:"科目类型",width:"100"},{default:a(({row:n})=>[e(L,{type:J(n.type)},{default:a(()=>[d(y(Q(n.type)),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"balance",label:"余额",width:"120",align:"right"},{default:a(({row:n})=>[b("span",{class:me(W(n.balance))},y(T(n.balance)),3)]),_:1}),e(u,{prop:"debit_balance",label:"借方余额",width:"120",align:"right"},{default:a(({row:n})=>[d(y(T(n.debit_balance)),1)]),_:1}),e(u,{prop:"credit_balance",label:"贷方余额",width:"120",align:"right"},{default:a(({row:n})=>[d(y(T(n.credit_balance)),1)]),_:1}),e(u,{prop:"status",label:"状态",width:"100"},{default:a(({row:n})=>[e(L,{type:n.status===1?"success":"danger"},{default:a(()=>[d(y(n.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"created_at",label:"创建时间",width:"180"}),e(u,{label:"操作",width:"200",fixed:"right"},{default:a(({row:n})=>[b("div",Le,[e(i,{size:"small",onClick:q=>G(n)},{default:a(()=>[...l[16]||(l[16]=[d("编辑",-1)])]),_:1},8,["onClick"]),e(i,{size:"small",type:"primary",onClick:q=>O(n)},{default:a(()=>[...l[17]||(l[17]=[d(" 添加子科目 ",-1)])]),_:1},8,["onClick"]),e(i,{size:"small",type:"danger",onClick:q=>j(n)},{default:a(()=>[...l[18]||(l[18]=[d(" 删除 ",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[ee,C.value]])]),e(Z,{modelValue:p.value,"onUpdate:modelValue":l[10]||(l[10]=n=>p.value=n),title:N.value,width:"600px",onClose:H},{footer:a(()=>[b("div",Me,[e(i,{onClick:l[9]||(l[9]=n=>p.value=!1)},{default:a(()=>[...l[23]||(l[23]=[d("取消",-1)])]),_:1}),e(i,{type:"primary",loading:x.value,onClick:P},{default:a(()=>[...l[24]||(l[24]=[d(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[e(B,{ref_key:"formRef",ref:g,model:o,rules:F,"label-width":"100px"},{default:a(()=>[e(r,{label:"科目代码",prop:"code"},{default:a(()=>[e(V,{modelValue:o.code,"onUpdate:modelValue":l[2]||(l[2]=n=>o.code=n),placeholder:"请输入科目代码"},null,8,["modelValue"])]),_:1}),e(r,{label:"科目名称",prop:"name"},{default:a(()=>[e(V,{modelValue:o.name,"onUpdate:modelValue":l[3]||(l[3]=n=>o.name=n),placeholder:"请输入科目名称"},null,8,["modelValue"])]),_:1}),e(r,{label:"科目类型",prop:"type"},{default:a(()=>[e(U,{modelValue:o.type,"onUpdate:modelValue":l[4]||(l[4]=n=>o.type=n),placeholder:"请选择科目类型"},{default:a(()=>[e(s,{label:"资产",value:"asset"}),e(s,{label:"负债",value:"liability"}),e(s,{label:"所有者权益",value:"equity"}),e(s,{label:"收入",value:"revenue"}),e(s,{label:"费用",value:"expense"})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"父级科目",prop:"parentId"},{default:a(()=>[e(Y,{modelValue:o.parentId,"onUpdate:modelValue":l[5]||(l[5]=n=>o.parentId=n),data:h.value,props:{value:"id",label:"name",children:"children"},placeholder:"请选择父级科目",clearable:"","check-strictly":""},null,8,["modelValue","data"])]),_:1}),e(r,{label:"余额方向",prop:"balanceDirection"},{default:a(()=>[e(M,{modelValue:o.balanceDirection,"onUpdate:modelValue":l[6]||(l[6]=n=>o.balanceDirection=n)},{default:a(()=>[e(k,{label:"debit"},{default:a(()=>[...l[19]||(l[19]=[d("借方",-1)])]),_:1}),e(k,{label:"credit"},{default:a(()=>[...l[20]||(l[20]=[d("贷方",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"状态",prop:"status"},{default:a(()=>[e(M,{modelValue:o.status,"onUpdate:modelValue":l[7]||(l[7]=n=>o.status=n)},{default:a(()=>[e(k,{label:1},{default:a(()=>[...l[21]||(l[21]=[d("启用",-1)])]),_:1}),e(k,{label:0},{default:a(()=>[...l[22]||(l[22]=[d("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"备注",prop:"remark"},{default:a(()=>[e(V,{modelValue:o.remark,"onUpdate:modelValue":l[8]||(l[8]=n=>o.remark=n),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Pe=le(qe,[["__scopeId","data-v-6bd642bf"]]);export{Pe as default};
